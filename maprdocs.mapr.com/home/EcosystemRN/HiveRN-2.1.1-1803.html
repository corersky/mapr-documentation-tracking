Hive 2.1.1-1803 (MEP 4.1.1 and MEP 5.0.0) Release Notes

   This section provides reference information, including new features,
   patches, known issues, and limitations for Hive 2.1-1803 MEP 4.1.1 and
   MEP 5.0.0.

   Below are release notes for the Hive component included in the MapR
   Converged Data Platform. You may also be interested in the [1]Apache
   Hive 2.1.1 Release Notes or the [2]Apache Hive homepage.
   Hive Version 2.1.1
   Release Date March 2018
   MapR Version Interoperability See [3]Hive and HCatalog Support Matrix
   and [4]Ecosystem Support Matrix and [5]MEP Components and OS Support.
   Source on GitHub [6]https://github.com/mapr/hive
   GitHub Release Tag

   2.1.1-mapr-1803
   Maven Artifacts See [7]Maven Artifacts for MapR.
   Package Names Navigate to [8]http://package.mapr.com/releases/MEP/, and
   select your MEP and OS to view the list of package names.

Feature Support

     * MapR supports Hive-2.1.1 on Tez-0.8.4. For more information, see
       [9]Tez 0.8.4-1803 (MEP 4.1.1 and MEP 5.0.0) Release Notes.
     * MapR does not support Hive on Spark, so you cannot use Spark as an
       execution engine for Hive. However, you can run Hive and Spark on
       the same cluster. You can also use Spark SQL and Drill to query
       Hive tables.
     * MapR does not support HDFS encryption in Hive tables.
     * MapR does not support HBase with Hive-2.1.1 starting from
       mapr-core-6.0.0.
     * MapR does not support LLAP with Hive-2.1.1 as Apache Slider is not
       a MapR ecosystem component.
     * Starting from Hive 2.1, Hive needs to run the schematool command as
       an initialization step.

New Features

     * Added PAM authentication support for HiveServer2 Web UI.
     * Added REST API WebHCat SSL encryption support.
     * Added HiveMetastore password encryption.
     * Added separate files for HiveServer2 and HiveMetastore logs.

Patches

   This release by MapR includes the following patches on the base Apache
   release. For complete details, refer to the commit log for this project
   in GitHub.
   Commit Date (YYYY-MM-DD) Comment
   ccf82995 2017-11-01 MAPR-29528: Cannot change hive.exec.scratchdir at
   runtime.
   15ce7e3f 2017-10-26 MAPR-HIVE-103: Verify flag before disable logging
   in ECO configure.sh.
   25a6248 2017-11-06 MAPR-HIVE-107: Set 777 permission to
   /user/hive/warehouse because of impersonation enabled by default.
   88f00ba 2017-11-10 MAPR-29571: Maprcli command start up more than one
   HiveMetastore process on Suse.
   9b0f52f8 2017-11-17 MAPR-23955: Running configure.sh -R changes
   permissions of hive logs.
   2da240d0 2017-11-15 MAPR-29591: Flooding of WARNING:
   org.apache.parquet.CorruptStatistics: Ignoring statistics because
   created_by could not be parsed' in application logs.
   57742b60 2017-11-15 MAPR-29743: [HIVE-2.1] Some messages are missed in
   hive.log if HiveServer2 and HiveMetastore share in log4j config.
   484eba4 2017-11-24 MAPR-30116: Create sub-folder structure if
   hive.exec.scratchdir is changed in runtime.
   cf2eb327 2017-12-06 MAPR-30201: Cannot start Hive CLI in embedded mode
   after running configure.sh -R after fresh installation.
   620c897 2017-12-07 MAPR-HIVE-118: Init metastore Uri if Derby DB is
   used by default and metastore is installed.
   60e2cbd4 2017-11-14 MAPR-29712: UpdateInputAccessTimeHook fails for
   non-current database.
   72108e7 2017-12-14 MAPR-30224: Cannot create /user/hive/warehouse using
   Hive configure.sh on fresh cluster.
   4004495c 2017-12-13 MAPR-30248 WebHcat logs does not work on hive-2.1.
   1ac82db7 2017-12-18 MAPR-30045: [Hive-2.1] Hive WebHcat DLL does not
   work, Hive Job issue.
   4ffe2c8 2017-12-20 MAPR-30310 Configure.sh cannot copy WebHcat required
   lib into hadoop common due to cannot find hadoop_version variable.
   414ec0e41 2017-12-21 MAPR-HIVE-139: Remove hardcoded password property
   removing from installer hive-site.xml and implement logic for it in
   Hive.
   d059322 2018-01-12 MAPR-HIVE-142 Add catch block in configure.sh
   WebHCat script. Warning trying to create link when the link is already
   created.
   b63f1291 2018-01-22 MAPR-30556: Incorrect work with mapr DB JSON
   tables.
   76d5a36d 2018-01-22 MAPR-HIVE-140: HiveServer2 Web UI remains unsecured
   in 6.0 secured by default clusters.
   ee119950 2018-01-26 MAPR-HIVE-147: Configure PAM + SSL for HS2 web UI
   on MAPR SASL cluster using configure.sh script.
   4c529b1 2018-02-01 MAPR-30631: Kryo exception when deserializing
   HiveNullValueSequenceFileOutputFormat.
   b16765c4 2018-02-07 MAPR-30719: Hive configure.sh overwrites custom
   hive.metastore.uris property for the first run.
   235dd03 2018-01-19 MAPR-HIVE-111: Review file permissions for Hive.
   19700c6 2018-02-15 MAPR-HIVE-143: REST API-WebHCat missing SSL support.
   64021d7 2018-02-16 MAPR-HIVE-158: Configure REST-API WebHCat with SSL
   on MAPR SASL cluster using configure.sh script.
   4a78363a 2018-02-19 MAPR-HIVE-146: Wrong owner of hiveversion file
   after hive configure.sh executed.
   d31e666e 2018-02-21 MAPR-30738: Running configure.sh -R changes
   group/owner of hive logs.
   ff54d883 2018-02-21 MAPR-30838: Errors loading
   org.apache.hive.conftool.ConfCli while running configure.sh -R.
   827a99f 2018-02-21 MAPR-HIVE-160: Set hive.metastore.execute.setugi to
   false on secure cluster installation.
   1d86d5c 2018-02-23 MAPR-30626: Starts up more that one process for hive
   services on CentOS 6.8.
   d95fe41 2018-03-15 MAPR-30968: Hive throws NPE when writing STRUCT data
   type with NULL value into MapRDB table.
   91bda9 2018-03-14 MAPR-HIVE-178: Unable to execute configure.sh -R for
   Hive if mapr user does not have a maprticket on a mapr-secure cluster.
   538722a 2018-04-02 MAPR-HIVE-187: Hive 2.1 CLI did not start on 6.0.1
   cluster with Spark 2.2.1.

   This release by MapR also includes the following backported issues. For
   complete details, refer to the commit log for this project in GitHub.
   Commit Date (YYYY-MM-DD) Comment
   63eae24 2017-11-07 HIVE-17664: Refactor and add new tests.
   79cd8c5

   2017-11-27
   HIVE-14139: NPE dropping permanent function.
   9d991a8e 2017-12-03 HIVE-16950: Dropping hive database/table which was
   created explicitly in default database location, deletes all databases
   data from default database location.
   d128066 2017-12-19 HIVE-16050: Regression: Union of null with non-null.
   c65b75d7 2018-01-22 HIVE-13864: Beeline ignores the command that
   follows a semicolon and comment.
   0127924 2018-01-22 HIVE-16935: Hive should strip comments from input
   before choosing which CommandProcessor to run.
   67c4d4ce 2018-01-22 HIVE-17050: Multiline queries that have comment in
   middle fail when executed via "beeline -e".
   102ab8b3 2018-01-22 HIVE-18127: Do not strip '--' comments from shell
   commands issued from the CLIDriver.
   2fec4cea 2018-02-05 HIVE-17731: Add a backward compat option for
   external users to HIVE-11985.

Known Issues and Limitations

     * The hive-site.xml file permissions is 640.
     * For accessing and using Hive, administrators have the ability to
       manage permissions for "Other" users. There are at least two
       available options on how to enable the using of hive-site.xml:
         1. Add users who want to work with Hive to a mapr group.
         2. Set permission to 644 to make it world-readable.

References

   1. https://issues.apache.org/jira/secure/ReleaseNote.jspa?version=12335838&styleName=Text&projectId=12310843
   2. http://hive.apache.org/
   3. file://localhost/root/docsync/tmp/maprdocs.mapr.com/home/InteropMatrix/r_hive_hcat_matrix.html#reference_zfq_nsb_t5
   4. file://localhost/root/docsync/tmp/maprdocs.mapr.com/home/InteropMatrix/r_eco_matrix.html#reference_kyp_kfv_s5
   5. https://maprdocs.mapr.com/home/InteropMatrix/r_MEP_52.html
   6. https://github.com/mapr/hive
   7. file://localhost/root/docsync/tmp/maprdocs.mapr.com/home/DevelopmentGuide/MavenArtifacts.html#MavenArtifactsforMapR
   8. http://package.mapr.com/releases/MEP/
   9. file://localhost/root/docsync/tmp/maprdocs.mapr.com/home/EcosystemRN/TezRN-0.8.4-1803.html
