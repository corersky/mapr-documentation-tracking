Secondary Index Alarms

   Secondary index alarms indicate issues that MapR-DB might encounter
   while updating secondary indexes. It is important that you understand
   what the alarms indicate, and how to resolve the issue causing them.

Secondary Index Update Lag High

   Logged As
          VOLUME_ALARM_TABLE_INDEX_LAG_HIGH

   Meaning
          This alarm displays the paths and names of the source tables for
          which replication lag is high. High lag times might be caused by
          these conditions:

          + High load on the source or replica
          + Low network bandwidth between the source and replicas
          + Miscellaneous error conditions that prevent replication from
            proceeding
          + Replication explicitly paused on the source cluster

   Resolution
          If you have configured the threshold for this alarm too low, you
          can increase the theshhold. You configure this lag at the volume
          level by specifying the dbindexlagsecalarmthresh parameter. See
          [1]volume modify for more information.

Secondary Index Update Error

   Logged As
          VOLUME_ALARM_TABLE_INDEX_ERROR

   Meaning
          This alarm occurs if the JSON table regions cannot connect to
          any of the internal gateways used to update fields in a
          secondary index. This might be caused by these conditions:

          + The replication gateway failed.
          + You have configured too few replication gateway instances.

   Resolution
          If the gateway failed, restart it. Otherwise, add more gateways.
          See [2]Managing Gateways for further information.

Secondary Index Encoding Error

   Logged As
          VOLUME_ALARM_TABLE_INDEX_ENCODING_ERROR

   Meaning
          This alarm occurs when any of the following encoding errors
          occur during index updates:

          + The indexed rowkey size is too big (> 32 Kb).
          + The indexed field is an array or nested document.
          + The indexed field contains a CAST function, and a failure
            occurs evaluating the CAST function.

   Resolution
          You must either correct your underlying data or redefine the
          index to avoid missing rows. See [3]Identifying and Resolving
          Secondary Index Encoding Errors for details about how to
          identify these errors and possible corrective actions.

          You also must manually [4]clear this alarm, even if you drop the
          index or the table.

References

   1. file://localhost/root/docsync/tmp/maprdocs.mapr.com/home/ReferenceGuide/volume-modify.html#volumemodify
   2. file://localhost/root/docsync/tmp/maprdocs.mapr.com/home/Gateways/Gateways-managing.html#topic_ynf_nkl_kz
   3. file://localhost/root/docsync/tmp/maprdocs.mapr.com/home/MapR-DB/Indexes/IdentifyingResolvingSIEncodingErrors.html#task_dlc_1d2_pbb
   4. file://localhost/root/docsync/tmp/maprdocs.mapr.com/home/ReferenceGuide/alarm-clear.html#alarmclear
