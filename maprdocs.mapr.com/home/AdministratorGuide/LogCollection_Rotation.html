Configure Log Rotation Policies for MapR Monitoring Services

   New log files are created based on the log rotation policy. By default,
   each MapR Monitoring service has a log rotation policy. In most cases,
   you can change the policy based on your requirements.

OpenTSDB Log Rotation Policy

   By default, OpenTSDB creates a new log files when the log file reaches
   the maximum file size of 128MB each. After 4 log files are generated,
   it deletes the oldest log file.

   To change the log rotation policy, edit the following file:
   /opt/mapr/opentsdb/opentsdb-<version>/etc/opentsdb/logback.xml. For
   more information, see the [1]OpenTSDB Logging documentation.

Fluentd and CollectD Log Rotation Policy

   By default, Fluentd and Collectd create a new log file each day and
   they both retain 30 log files. Log rotation for Fluentd and Collectd
   logs is managed by logrotate.

   To change the log rotation policies, edit the following files:
   /etc/logrotate.d/fluentd and etc/logrotate.d/collectd. For details on
   how to update the log rotation policy, see the [2]logrotate
   documentation.

Elasticsearch Log Rotation Policy

   By default, Elasticsearch creates a new log file each day and it
   retains 7 days of logs.

   To change the log rotation policy, edit the following file
   /opt/mapr/elasticsearch/elasticsearch-<version>/etc/elasticsearch/loggi
   ng.yml. For details on how to update logging.yml, see the
   [3]Elasticsearch documentation.

Grafana Log Rotation Policy

   By default, Grafana creates a new log file whenever the current log
   file exceeds the 256MB. It retains log files that were generated in the
   last 7 days.

   To change the log rotation policy, edit the [log] section of the
   following file:
   /opt/mapr/grafana/grafana-<version>/etc/grafana/grafana.ini. For
   details on how to update the grafana.ini, see the [4]Grafana
   documentation.

Kibana Log Rotation Policy

   Each time you start Kibana, it logs data to its log file and it does
   not automatically delete old log files. A new log file is created when
   you restart Kibana. To purge the log files, see [5]Configure Log
   Retention.

References

   1. http://opentsdb.net/docs/build/html/user_guide/logging.html
   2. https://linuxconfig.org/logrotate
   3. https://www.elastic.co/guide/index.html
   4. http://docs.grafana.org/installation/configuration/
   5. file://localhost/root/docsync/tmp/maprdocs.mapr.com/home/AdministratorGuide/LogCollection_Purging.html#concept_nwq_1ng_2w
