Deploying a Cluster in Azure Using the MapR Marketplace Offering

   Use these steps to deploy a cluster using the MapR marketplace offering
   in Azure:

Select the Offering

    1. Navigate to the MapR page in the Azure Marketplace. For more
       information, see [1]MapR Offerings in the Azure Marketplace.
    2. Select the MapR Converged Data Platform v6 BYOL offering.
    3. Click Create.

Configure Basic Settings

    1. In the Admin username field, enter the user name for the cluster
       administrator (for example, admin_mapr). This is an
       operating-system account that will be created on all nodes in the
       cluster.
    2. In the Authentication type field, select Password or SSH public
       key.
    3. In the Admin password field, enter the password for the Admin user.
       The password must be between 12 and 72 characters long and must
       have three of the following:
          + One lower case character
          + One upper case character
          + One number
          + One special character that is not "\" or "-".
       Note: For cloud deployments, the installer uses the Cluster Admin
       Password as the MySQL root password when it creates a MySQL
       database for certain services that require a database.
    4. Confirm (re-enter) the Admin password.
    5. In the Subscription field, enter the subscription option that is
       appropriate for your installation.
    6. In the Resource group field, select the option to create a new
       resource group, or select the option to use an existing group. If
       you want to create a new resource group, type the name of the
       resource group. The examples in this procedure use myRG as the
       resource group name.
    7. In the Location field, select your region.
    8. Click OK.

Configure the MapR Cluster Configuration

    1. In the MapR cluster name field, enter a name for the cluster. Give
       your cluster a DNS-friendly name, such as my.cluster.com. The name
       should be unique across all of your clusters.
    2. In the Cluster admin password field, enter the password for the UID
       mapr. The password must be at least 6 characters, no more than 30
       characters, and must include at least one upper case letter, one
       lower case letter, and one numeric digit.
       Note: The UID mapr is not the same account as the Admin user
       account that you created in step 1 of [2]Configure Basic Settings.
       The Admin user account is used for MapR software installation and
       can be used subsequently for SSH access and server administration.
       The UID mapr is the MapR administrator account, which is an
       additional OS account that is created on each node in the cluster
       and acts as the MapR system user.
    3. Confirm the password.
    4. In the MEP version field, select the MapR Ecosystem Pack (MEP)
       version if it is not preselected for you.
    5. In the License type field, select either the Enterprise or
       Community
    6. In the Provisioning template field, select the auto-provisioning
       template. For more information, see [3]Auto-Provisioning Templates.
    7. In the Node count field, enter the number of nodes.
    8. Click OK.

Complete the Node Configuration

    1. In the Virtual Machine Size menu, select a VM size. Click View all
       to see the supported machines for the selected region.
    2. In the Disk count field, enter the number of disks.
    3. In the Disk type field, select between SSD and HDD disks.
    4. In the Disk size field, enter the disk size in gigabytes.
    5. Click OK.

Configure Global Access and Security

    1. In the Virtual network field, create a new virtual network or
       choose an existing one.
    2. In the Subnets menu, specify as needed:
          + Private subnet name
          + Private subnet address prefix
          + Public subnet name
          + Public subnet address prefix
    3. In the Public internet access CIDR field, enter the public Internet
       access CIDR. (Use * for all Internet traffic.) This field allows
       you to set or restrict the outside Internet IP addresses that can
       access the cluster.
    4. In the Install OpenVPN field, select True if you want to install
       OpenVPN. For more information about using OpenVPN to access this
       MapR cluster, see [4]Using OpenVPN.
    5. In the OpenVPN login user field, specify a user name for OpenVPN.
    6. In the OpenVPN login user password field, specify a password for
       OpenVPN. The password must be at least 6 characters, no more than
       30 characters, and must include at least one upper case letter, one
       lower case letter, and one numeric digit.
    7. Confirm the password.
    8. In the Disk type field, select SSD or HDD as the disk type.
    9. Click OK.

Complete the Summary Information and Purchase

    1. Review the summary information. If necessary, navigate back through
       the menus to make corrections or updates.
    2. Click OK.
    3. On the Create screen, review your contact information, then click
       Create.

Gain Access to the Cluster

    1. Navigate to the Resource groups menu.
    2. Click the link for your resource group (for example, myRG) to
       monitor the creation of resources.
    3. Once the cluster is deployed, you can access it through a
       collection of URLs provided by the MapR Installer. These URLs may
       require a VPN connection, and you may need to use a tool such as
       OpenVPN to connect to the virtual machine. For more information,
       see [5]Using OpenVPN.
       If you did not choose to install OpenVPN in step 4 of [6]Configure
       Global Access and Security, you must use another method or tool to
       connect to the virtual machine.
    4. Once you are connected, use the MAPRINSTALLERURL to access the
       status page of the MapR Installer. To locate the MAPRINSTALLERURL,
       navigate to Resource Groups > myRG > Deployments, and click the
       cluster deployment name. For example:
       [azure_overview_page.png]
       The Overview page appears.
    5. Click the Outputs tab to display the MAPRINSTALLERURL information.
       [azure_outputs.png]
    6. Paste the MAPRINSTALLERURL into a browser to access the status page
       of the MapR Installer, which shows links to resources you can use
       to get more information about the cluster:
       [mapr_installer_status_page_azure_new.png]
    7. To log on to the MapR Control System (MCS), click one of the
       Webserver links. Log on using the password you specified for the
       UID mapr in [7]Configure the MapR Cluster Configuration.

References

   1. file://localhost/root/docsync/tmp/mapr.com/docs/home/AdvancedInstallation/mapr_offerings_Azure_marketplace.html#concept_yn1_rhw_x1b
   2. file://localhost/root/docsync/tmp/mapr.com/docs/home/AdvancedInstallation/deploying_cluster_azure_using_predefined_prov_template.html#task_jpb_clw_x1b
   3. file://localhost/root/docsync/tmp/mapr.com/docs/home/AdvancedInstallation/auto-provisioning-templates.html
   4. file://localhost/root/docsync/tmp/mapr.com/docs/home/AdvancedInstallation/using_OpenVPN.html#concept_kwx_hhp_x1b
   5. file://localhost/root/docsync/tmp/mapr.com/docs/home/AdvancedInstallation/using_OpenVPN.html#concept_kwx_hhp_x1b
   6. file://localhost/root/docsync/tmp/mapr.com/docs/home/AdvancedInstallation/deploying_cluster_azure_using_predefined_prov_template.html#task_ll5_2lw_x1b
   7. file://localhost/root/docsync/tmp/mapr.com/docs/home/AdvancedInstallation/deploying_cluster_azure_using_predefined_prov_template.html#task_x4b_dlw_x1b
