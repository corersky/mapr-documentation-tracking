Running the MapR Azure Templates

   This procedure describes how to run the MapR reference template for
   Azure to deploy your MapR cluster.
    1. Download the mainTemplate.json file from GitHub. For more
       information about the template, see [1]About the MapR Reference
       Templates for Azure.
    2. Navigate to the [2]Azure portal, and click New (+).
    3. In the search field, type Template deployment.
    4. Click Create.
    5. Click Build your own template in the editor. In the Edit template
       screen, you can load a file or paste the contents of a template
       into the work area.
       [edit_template_azure.png]
    6. Paste the contents of the mainTemplate.json file into the Edit
       template working area.
    7. Click Save. The template fields are displayed.
    8. In the Basics section, enter your site-specific values for the
       following fields:
          + Subscription
          + Resource group (new or existing)
          + Location
    9. In the Settings section, enter the username for the virtual machine
       in the Admin Username field. This is the username for the virtual
       machine.
   10. In the Admin Auth Type field, enter the authentication type
       (password or SSH public key) for the virtual machine.
   11. In the Admin Password field, enter the password for the virtual
       machine.
   12. In the Admin Public Key field, enter the public key authentication
       for the virtual machine. If you entered an Admin Password, this
       field can be left blank.
   13. In the Cluster Name field, enter your cluster name.
   14. In the Cluster Admin Password field, enter the password
       corresponding to the MapR UID. For MapR images, the user defaults
       to mapr.
       Note: For cloud deployments, the installer uses the Cluster Admin
       Password as the MySQL root password when it creates a MySQL
       database for certain services that require a database.
   15. In the Mep Version field, enter the MapR Expansion Pack (MEP)
       version.
   16. In the Service Template field, enter the auto-provisioning template
       corresponding to the services you need. For more information, see
       [3]Auto-Provisioning Templates.
   17. In the Node Count field, enter the number of nodes.
   18. In the Instance Type field, enter one of the following instances.
       MapR Azure templates support the following instance types. For more
       information about Azure instance types, see [4]Sizes for Linux
       Virtual Machines in Azure.
          + Standard_D4s_v3
          + Standard_D8s_v3
          + Standard_D16s_v3
          + Standard_DS12_v2
          + Standard_DS13_v2
          + Standard_DS14_v2
          + Standard_DS15_v2
          + Standard_DS3_v2
          + Standard_DS4_v2
          + Standard_DS5_v2
          + Standard_E4s_v3
          + Standard_E8s_v3
          + Standard_E16s_v3
          + Standard_E32s_v3
          + Standard_F8s
          + Standard_F16s
          + Standard_GS2
          + Standard_GS3
          + Standard_GS4
          + Standard_L4s
          + Standard_L8s
          + Standard_L16s
          + Standard_L32s
   19. In the Disk Type field, enter the disk type to use for managed
       disks (Premium_LRS, Standard_LRS).
   20. In the License Type field, enter your license type.
   21. In the Disk Size field, enter the size in gigabytes (GB) of each
       disk.
   22. In the Disk Count field, enter the number of disks.
   23. In the Public Access CIDR field, enter the public Internet access
       CIDR. (Use * for all Internet traffic.) This field allows you to
       set or restrict the outside Internet IP addresses that can access
       the cluster.
   24. In the Install Open VPN field, enter true if you want to install
       OpenVPN to enable access to a private cluster. For more information
       about OpenVPN, see [5]Using OpenVPN.
   25. In the Open Vpn User field, enter the login user for OpenVPN.
   26. In the Open Vpn Password field, enter the password for the OpenVPN
       login user. Use a strong password to protect your cluster.
   27. In the Vnet Name field, enter the name of the virtual network.
   28. In the Vnet Resource Group field, enter the resource group where
       the virtual network will be created.
   29. In the Vnet Address Prefix field, enter the address prefix for the
       virtual network.
   30. In the Vnet New or Existing field, enter new or existing to
       describe the virtual network.
   31. In the Vnet Private Subnet Name field, enter the subnet name of the
       virtual network.
   32. In the Vnet Private Subnet Address Prefix field, enter the private
       subnet address prefix of the virtual network.
   33. In the Vnet Public Subnet Name field, enter the subnet name of the
       virtual network.
   34. In the Vnet Public Subnet Address Prefix field, enter the public
       subnet address prefix of the virtual network.
   35. In the Vnet Public Subnet Start Address field, enter the public
       subnet start address of the virtual network.
   36. In the Location field, enter your region
   37. Click the option to agree to the terms and conditions.
   38. Click Purchase.
   39. Navigate to the Azure resource groups page to monitor the creation
       of the cluster.
       Note: Cluster creation for a three-node cluster can take 15-20
       minutes. Depending on the size of the cluster, cluster creation can
       take hours in some cases.

References

   1. file://localhost/root/docsync/tmp/mapr.com/docs/home/AdvancedInstallation/about_mapr_ref_templates_Azure.html#concept_n5p_rtw_x1b
   2. https://portal.azure.com/
   3. file://localhost/root/docsync/tmp/mapr.com/docs/home/AdvancedInstallation/auto-provisioning-templates.html
   4. https://docs.microsoft.com/en-us/azure/virtual-machines/linux/sizes
   5. file://localhost/root/docsync/tmp/mapr.com/docs/home/AdvancedInstallation/using_OpenVPN.html#concept_kwx_hhp_x1b
