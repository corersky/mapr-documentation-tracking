node list

   Lists nodes in the cluster.

   You can specify a set of nodes for which to retrieve information in
   several ways:
     * To list only nodes with raised alarms, set alarmednodes to 1.
     * To list only NFS nodes, set nfsnodes to 1.
     * To window the list, use the start and limit options to select only
       a portion of the results.
     * To list nodes that match certain criteria, pass a filter to the
       filter parameter. See the [1]Fields table on the [2]node page for
       the fields available to filter by. See the [3]maprcli and REST API
       Syntax page for information on filters.

Syntax

   CLI

maprcli node list
    [ -alarmednodes 0|1 ]
    [ -cluster <cluster> ]
    [ -clientsonly true|false ]
    [ -columns <columns>]
    [ -filter <filter> ]
    [ -limit <limit> ]
    [ -nfsnodes 0|1 ]
    [ -output terse|verbose ]
    [ -sortby <attribute> ]
    [ -start <offset> ]
    [ -zkconnect <ZooKeeper Connect String> ]

   REST

          Request Type GET
          Request URL
http[s]://<host>:<port>/rest/node/list[?<parameters>]

Parameters

   Parameter

   Description
   alarmednodes If set to 1, displays only nodes with raised alarms.
   Cannot be used if nfsnodes is set.
   cluster The cluster on which to run the command.
   clientsonly A filter for retrieving the list of nodes running unique
   platinum FUSE-based POSIX, NFSv3, NFSv4 and loopbacknfs POSIX clients
   if value is set to true. The command returns the following fields:
   clienttype, clienthealth, hostname, ip, lasthb, id. For more
   information, see the [4]Fields table on the [5]node command page.

   If false, which is the default value, returns per node-level
   information for all the services running on the node and other stats.
   columns A comma-separated list of fields to return in the query,
   specified by the short names.
   Note: When specifying this option, the ip and hostname columns are
   always returned in the query.
   filter A filter specifying nodes on which to start or stop services.
   See the Fields table on the [6]node page for the fields available to
   filter. See the [7]maprcli and REST API Syntax page for information on
   filters.
   limit The number of rows to return, beginning at start. Default: 0
   nfsnodes If set to 1, displays only nodes running NFS. Cannot be used
   if alarmednodes is set.
   output Specifies whether the output should be terse or verbose.
   sortby Specifies one of the following attributes to sort the list of
   nodes by: nodeid, nodeip, nodehostname, noderackpath, nodeswitchpath,
   nodestatus, nodeservices, nodefshb, nodejthb, nodedisktotal,
   nodediskused, nodediskavail, noderpc, noderpcin, noderpcout,
   nodediskcount, nodediskreadops, nodediskreadkbytes, nodediskwriteops,
   nodediskwritekbytes, nodecpucount, nodecpuutil, nodememtotal,
   nodememused, nodefaileddisks, nodevirtualip, nodevirtualipend,
   nodenetmaskvnodemacaddress, nodegateway, nodebytesreceived,
   nodebytessent, nodecpuuptime, nodemaprdiskcount, nodestatusdesc,
   nodeblockmovesout, nodeblockmovesinvnodemaxcontainersthreshold,
   nodenuminstances, nodenumspsperinstance, nodenfsstate,
   nodeisposixclient, nodeisloopbacknfs, nodeisloopbacknfsrunning
   start The offset from the starting row according to sort. Default: 0
   zkconnect [8]ZooKeeper Connect String

Output

   Information about the nodes. See the [9]Fields table on the [10]node
   command page.

   Sample Output
# /opt/mapr/bin/maprcli node list -json
{
        "timestamp":1521121710003,
        "timeofday":"2018-03-15 06:48:30.003 GMT-0700 AM",
        "status":"OK",
        "total":1,
        "data":[
                {
                        "id":"2420737303527197275",
                        "ip":"10.20.30.40",
                        "hostname":"sample.lab",
                        "racktopo":"/data/default-rack/sample.lab",
                        "health":2,
                        "healthDesc":"One or more alarms raised",
                        "service":"resourcemanager,fileserver,cldb,nodemanager,g
ateway,hoststats,apiserver",
                        "configuredservice":"resourcemanager,fileserver,cldb,nod
emanager,hoststats,apiserver",
                        "fs-heartbeat":0,
                        "jt-heartbeat":2,
                        "dtotal":273,
                        "dused":0,
                        "davail":272,
                        "rpcs":0,
                        "rpcin":205,
                        "rpcout":501,
                        "disks":5,
                        "MapRfs disks":3,
                        "faileddisks":0,
                        "dreads":0,
                        "dreadK":0,
                        "dwrites":12,
                        "dwriteK":128,
                        "cpus":8,
                        "utilization":23,
                        "uptime":"Sat Feb 10 14:53:05 PST 2018",
                        "mtotal":15886,
                        "mused":10288,
                        "ttmapSlots":0,
                        "ttmapUsed":0,
                        "ttReduceSlots":0,
                        "ttReduceUsed":0,
                        "bytesReceived":612,
                        "bytesSent":368,
                        "numResyncSlots":16,
                        "blockMovesOut":false,
                        "blockMovesIn":false,
                        "numInstances":"1",
                        "numReportedInstances":"1",
                        "spsPerInstance":"0",
                        "numPutsInLastTenSeconds":0,
                        "numPutsInLastMinute":0,
                        "numPutsInLastFiveMinutes":0,
                        "numPutsInLastFifteenMinutes":0,
                        "numGetsInLastTenSeconds":0,
                        "numGetsInLastMinute":0,
                        "numGetsInLastFiveMinutes":0,
                        "numGetsInLastFifteenMinutes":0,
                        "numScansInLastTenSeconds":0,
                        "numScansInLastMinute":0,
                        "numScansInLastFiveMinutes":0,
                        "numScansInLastFifteenMinutes":0,
                        "LogLevelAlarm":1521059886739,
                        "ServiceCLDBDownNotRunningAlarm":0,
                        "ServiceFileserverDownNotRunningAlarm":0,
                        "ServiceJTDownNotRunningAlarm":0,
                        "ServiceTTDownNotRunningAlarm":0,
                        "ServiceHBMasterDownNotRunningAlarm":0,
                        "ServiceHBRegionDownNotRunningAlarm":0,
                        "ServiceNFSDownNotRunningAlarm":0,
                        "ServiceWebserverDownNotRunningAlarm":0,
                        "ServiceHoststatsDownNotRunningAlarm":0,
                        "DiskFailureAlarm":0,
                        "VersionMismatchAlarm":0,
                        "TimeSkewAlarm":0,
                        "HbProcessingSlow":0,
                        "RootPartitionFullAlarm":0,
                        "HomeMapRFullAlarm":0,
                        "CorePresentAlarm":0,
                        "HighMfsMemoryAlarm":0,
                        "PamMisconfiguredAlarm":0,
                        "TTLocaldirFullAlarm":0,
                        "NodeNoHeartbeatAlarm":0,
                        "NodeMaprUserMismatchAlarm":0,
                        "NodeDuplicateHostIdAlarm":0,
                        "NodeMetricsWriteProblemAlarm":0,
                        "NodeTooManyContainersAlarm":0,
                        "IncorrectTopologyAlarm":0,
                        "ServiceHueDownNotRunningAlarm":0,
                        "ServiceHttpfsDownNotRunningAlarm":0,
                        "ServiceBeeswaxDownNotRunningAlarm":0,
                        "ServiceHiveDownNotRunningAlarm":0,
                        "ServiceHs2DownNotRunningAlarm":0,
                        "ServiceOozieDownNotRunningAlarm":0,
                        "NodeManagerDown":0,
                        "GatewayServiceDown":0,
                        "InstanceMismatch":0,
                        "ResourceManagerDown":0,
                        "Insufficient memory for buckets":0,
                        "NoDiskAttached":0,
                        "MemoryAllocationAlarm":0,
                        "MemorySwapping":0,
                        "ApiServerDown":0
                }
        ]
}

Fields

   For definitions of the output fields, and short names for use with
   filters, see the [11]Fields table on the [12]node command page.

Examples

   List all nodes:

   For best results, use the -json option when listing all nodes or a
   large subset of node information.
     * [13]CLI
     * [14]REST

maprcli node list -json

https://r1n1.sj.us:8443/rest/node/list

   List the health and configuredservice of all nodes:

   The following examples also show the use of short forms for the column
   parameter.
     * [15]CLI
     * [16]REST

maprcli node list -columns service,health,configuredservice
maprcli node list -columns svc,h,csvc

https://10.10.82.23:8443/rest/node/list?columns=service,health,configuredservice
https://10.10.82.23:8443/rest/node/list?columns=svc,h,csvs

   List the number of slots on all nodes:
     * [17]CLI
     * [18]REST

maprcli node list -columns ip,ttmapSlots,ttmapUsed,ttReduceSlots,ttReduceUsed

https://abc.sj.us:8443/rest/node/list?columns=ip,ttmapSlots,ttmapUsed,ttReduceSl
ots,ttReduceUsed

   List nodes on a particular subnet:
     * [19]CLI
     * [20]REST

maprcli node list -filter [ip==192.168.10.*]

https://abc.sj.us:8443/rest/node/list?filter=%5Bip%3D%3D192.168.10.*%5D

   List the nodes running the clients:
     * [21]CLI
     * [22]REST

# maprcli node list -clientsonly true
clienttype           clienthealth  hostname           ip                       l
asthb  id
posixclientgold      Active        atsqa4-119.qa.lab  10.10.88.119,172.17.0.1  2
8      5412384279424088014
NFS_V3               Active        qa108-181.qa.lab   10.10.108.181            1
       711699521447755347
posixclientbasic     Active        qa108-182.qa.lab   10.10.108.182            5
       5689202715616988402
posixclientplatinum  Active        qa108-183.qa.lab   10.10.108.183            1
5      5679519305469912939
LOOPBACK_NFS         Active        qa108-184.qa.lab   10.10.108.184            1
       723686691202793155
NFS_V4               Active        qa108-185.qa.lab   10.10.108.185            1
       7808496860582738296
posixclientbasic     Active        qa108-186.qa.lab   10.10.108.186            2
5      2792316733179447508
posixclientplatinum  Active        qa108-187.qa.lab   10.10.108.187            1
1      5678398615695393161
LOOPBACK_NFS         Active        qa108-188.qa.lab   10.10.108.188            1
       5524477677754836725
NFS_V3               Active        qa108-189.qa.lab   10.10.108.189            1
       3396225116726542411
NFS_V4               Active        qa108-190.qa.lab   10.10.108.190            2
       1203052391917747224

# curl -k -X POST 'https://abc.sj.us:8443/rest/node/list?clientsonly=true' --use
r mapr:mapr
{"timestamp":1531171868890,"timeofday":"2018-07-09 02:31:08.890 GMT-0700 PM","st
atus":"OK","total":1,"data":[{"id":"5412384279424088014","hostname":"atsqa4-119.
qa.lab","ip":"10.10.88.119,172.17.0.1","clienttype":"posixclientgold","clienthea
lth":"Active","lasthb":28}]}

References

   1. file://localhost/root/docsync/tmp/mapr.com/docs/home/ReferenceGuide/node.html#node__fields
   2. file://localhost/root/docsync/tmp/mapr.com/docs/home/ReferenceGuide/node.html
   3. file://localhost/root/docsync/tmp/mapr.com/docs/home/ReferenceGuide/maprcli-REST-API-Syntax-Filters.html#concept_znz_qxz_5t
   4. file://localhost/root/docsync/tmp/mapr.com/docs/home/ReferenceGuide/node.html#node__fields
   5. file://localhost/root/docsync/tmp/mapr.com/docs/home/ReferenceGuide/node.html
   6. file://localhost/root/docsync/tmp/mapr.com/docs/home/ReferenceGuide/node.html
   7. file://localhost/root/docsync/tmp/mapr.com/docs/home/ReferenceGuide/maprcli-REST-API-Syntax-Filters.html#concept_znz_qxz_5t
   8. file://localhost/root/docsync/tmp/mapr.com/docs/home/ReferenceGuide/maprcli-REST-API-Syntax-CommonParameters.html#concept_ymb_yxz_5t
   9. file://localhost/root/docsync/tmp/mapr.com/docs/home/ReferenceGuide/node.html#node__fields
  10. file://localhost/root/docsync/tmp/mapr.com/docs/home/ReferenceGuide/node.html
  11. file://localhost/root/docsync/tmp/mapr.com/docs/home/ReferenceGuide/node.html#node__fields
  12. file://localhost/root/docsync/tmp/mapr.com/docs/home/ReferenceGuide/node.html
  13. file://localhost/root/docsync/tmp/mapr.com/docs/home/ReferenceGuide/node-list.html#div1entry1
  14. file://localhost/root/docsync/tmp/mapr.com/docs/home/ReferenceGuide/node-list.html#div1entry2
  15. file://localhost/root/docsync/tmp/mapr.com/docs/home/ReferenceGuide/node-list.html#div2entry1
  16. file://localhost/root/docsync/tmp/mapr.com/docs/home/ReferenceGuide/node-list.html#div2entry2
  17. file://localhost/root/docsync/tmp/mapr.com/docs/home/ReferenceGuide/node-list.html#div3entry1
  18. file://localhost/root/docsync/tmp/mapr.com/docs/home/ReferenceGuide/node-list.html#div3entry2
  19. file://localhost/root/docsync/tmp/mapr.com/docs/home/ReferenceGuide/node-list.html#div4entry1
  20. file://localhost/root/docsync/tmp/mapr.com/docs/home/ReferenceGuide/node-list.html#div4entry2
  21. file://localhost/root/docsync/tmp/mapr.com/docs/home/ReferenceGuide/node-list.html#div5entry1
  22. file://localhost/root/docsync/tmp/mapr.com/docs/home/ReferenceGuide/node-list.html#div5entry2
