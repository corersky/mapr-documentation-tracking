Pre-Upgrade Steps for Tez

   Complete the following steps before you upgrade Tez with or without the
   MapR Installer.

   You need to back up the configuration properties files if you made any
   configuration changes that you want to carry over to the next version.
    1. Locate the files in /opt/mapr/tez/tez-<version>/conf/ directory.
    2. Copy the files to a location outside the MapR installation.
    3. Delete the old /apps/tez directory on the MapR-FS layer.
hadoop fs -rm -r /apps/tez
       After upgrading, you can reapply changes to the updated Tez
       installation using the backup.

Preserving Tez Configuration

   Starting from MEP 5.0.1, preserving of user configuration logic is
   built into Tez.
   For a minor version update (for example, Tez-0.8-1803 to Tez-0.8-1808),
   user configuration from a previous version is copied to a folder with
   an old version timestamp and is also copied to a new version conf
   folder.
     * [1]CentOS and SUSE OS
     * [2]Ubuntu

     * Upgrade from MEP 3.x to MEP 5.0.1, user configuration preserving
       has no errors.
     * Upgrade from MEP 4.0.0/4.1.0 to MEP 5.0.1, user configuration
       preserving works only for configuration files (such as tez-site.xml
       and configs.js), but the Tomcat service is still present from the
       previous Tez version. As a precondition for upgrade from MEP
       4.0.0/4.1.0, manually stop the Tomcat service and remove the
       tez-0.8/ directory.
     * Upgrade from MEP 4.1.1/5.0.0 to MEP 5.0.1, user configuration
       preserving has no errors.

     * Upgrade from MEP 3.x to MEP 5.0.1, user configuration preserving
       has no errors.
     * Upgrade from MEP 4.0.0/4.1.0 to MEP 5.0.1, user configuration
       preserving works only for configuration files (such as tez-site.xml
       and configs.js), but the Tomcat service is still present from the
       previous Tez version. As a precondition for upgrade from MEP
       4.0.0/4.1.0, manually stop the Tomcat service and remove the
       tez-0.8/ directory.
     * Upgrade from MEP 4.1.1/5.0.0 to MEP 5.0.1, you need to perform user
       configuration preserve manually.

References

   1. file://localhost/root/docsync/tmp/mapr.com/docs/home/UpgradeGuide/PreupgradeStepsTez.html#div1entry1
   2. file://localhost/root/docsync/tmp/mapr.com/docs/home/UpgradeGuide/PreupgradeStepsTez.html#div1entry2
