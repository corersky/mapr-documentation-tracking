Enabling Volume Metric Collection

   On all new installations, this feature is enabled by default and you
   only need to enable metrics collection for each volume. If you are
   upgrading, to start collecting volume metrics that you can then
   visualize in Grafana, you must enable metrics collection feature and
   then enable metrics collection for each volume.

   You can enable metrics collection from the command-line and using the
   MapR Control System.

Enabling the Metric Collection Feature

   Enable the feature by running the following command:
maprcli cluster feature enable -name mfs.feature.metrics.support

Enabling Metric Collection for New Volumes Using the MapR Control System

    1. Log in to MCS and click Data > Volumes.
    2. Click Create Volume to display the Create New Volume page.
    3. Enter values for the required settings and move the slider for
       Collect Metrics to Yes to enable metric collection for the volume.
       For more information, see [1]Creating a Volume.
    4. Click Create Volume to create the volume.

Enabling Metric Collection for Existing Volumes Using the MapR Control System

    1. Log in to MCS and click Data > Volumes.
    2. Select the Volumes to edit and Edit Volume from the Actions
       dropdown menu or go the [2]volume info page and click Edit Volume.
    3. Move the slider for Collect Metrics to Yes to enable metric
       collection for the volume.
       For more information, see [3]Creating a Volume.
    4. Click Save Changes for the changes to take effect.

Enabling Metric Collection for Volumes Using the CLI

   Enable metrics collection on:
     * A new volume by running the following command:
maprcli volume create -name <volume-name> -path <volume-mount-path> -type <volum
e-type> -metricsenabled true
       For more information, see [4]volume create.
     * An existing volume by running the following command:
maprcli volume modify -name <volume-name> -metricsenabled true
       For more information, see [5]volume modify.
     * All volumes that do not have mapr in the name by running the
       following script:
for i in `maprcli volume list -columns n | grep -v mapr`; do echo $i; maprcli vo
lume modify -name $i -metricsenabled true; done

References

   1. file://localhost/root/docsync/tmp/mapr.com/docs/home/ClusterAdministration/data/volumes/CreateVols.html
   2. file://localhost/root/docsync/tmp/mapr.com/docs/home/ClusterAdministration/data/volumes/ViewVolInfo.html
   3. file://localhost/root/docsync/tmp/mapr.com/docs/home/ClusterAdministration/data/volumes/CreateVols.html
   4. file://localhost/root/docsync/tmp/mapr.com/docs/home/ReferenceGuide/volume-create.html
   5. file://localhost/root/docsync/tmp/mapr.com/docs/home/ReferenceGuide/volume-modify.html
