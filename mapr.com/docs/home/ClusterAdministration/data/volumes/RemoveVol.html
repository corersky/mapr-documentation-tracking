Removing Volumes

   You can remove a volume using MCS and the CLI.
   Note: When you remove a volume enabled for:
     * Cold tiering, the directory/folder for the volume in the metadata
       volume associated with the tier is also removed asynchronously.
     * Warm tiering, the directory/folder for the volume in the metadata
       volume associated with the tier and the erasure-coded volume are
       also removed asynchronously.

Removing Volumes Using the MapR Control System

   To remove one or more volumes, in the Summary tab under Data > Volumes:
    1. Select the volumes to remove from the list of volumes in the
       Volumes pane.
    2. Click Remove Volume(s) from the Actions dropdown menu.
       The Remove Volume(s) confirmation dialog displays.
    3. Choose one of the following:
          + Remove gracefully — Specifies whether to check for
            dependencies before removing the volume. If the volume has
            dependencies, such as associated snapshots, the volume will
            not be deleted, but an alarm will be raised.
            Note: Volume will not be deleted if mirroring is in progress
            as the mirror volume is synchronized from a hidden internal
            snapshot of the source volume.
          + Remove completely — Indicates that volume must be removed
            forcefully, even if the volume has dependencies.
    4. Click Remove Volume.
       The selected volumes are removed.

Removing a Standard Volume Using the MapR Control System

   To remove a standard volume from the [1]volume information page:
    1. Select Remove Volume(s) from the Select an Action dropdown list.
       The Remove Volume(s) confirmation dialog displays.
    2. Choose one of the following:
          + Remove gracefully — Specifies whether to check for
            dependencies before removing the volume. If the volume has
            dependencies, such as associated snapshots, the volume will
            not be deleted, but an alarm will be raised.
            Note: Volume will not be deleted if mirroring is in progress
            as the mirror volume is synchronized from a hidden internal
            snapshot of the source volume.
          + Remove completely — Indicates that volume must be removed
            forcefully, even if the volume has dependencies.
    3. Click Remove Volume.

Removing a Mirror Volume Using the MapR Control System

   To remove a mirror volume from the [2]volume information page:
    1. Select Remove Volume from the Select an Action dropdown list.
       The Remove Volume confirmation dialog displays.
    2. Choose one of the following:
          + Remove gracefully — Specifies whether to check for
            dependencies, such as associated snapshots, before removing
            the volume. If mirroring is in progress, the volume will not
            be deleted as the mirror volume is synchronized from a hidden
            internal snapshot of the source volume; however, an alarm will
            be raised.
          + Remove completely — Indicates that volume must be removed
            forcefully, even if the volume has dependencies.
    3. Click Remove Volume.

Removing Volumes Using the CLI or REST API

   The basic command to remove a volume is:
maprcli volume remove -name <volume name>

   For complete reference information, see [3]volume remove.
   Note: When a volume is removed, the data present in that volume is not
   purged from the file system immediately. The following parameters
   control when the deleted volumes are purged.
     * cldb.purge.delay.hours — Time to wait (in hours) to trigger purge
       of any volume after CLDB becomes master. The default value is 1
       hour.
     * cldb.volumes.purge.frequency — The frequency (in minutes) for
       purging the data of deleted volumes. The default value is 60
       minutes.
       Use the maprcli command to set these parameters. For example:
maprcli config save -values {"cldb.purge.delay.hours":"2"}
maprcli config save -values {"cldb.volumes.purge.frequency":"120"}

References

   1. file://localhost/root/docsync/tmp/mapr.com/docs/home/ClusterAdministration/data/volumes/ViewVolInfo.html
   2. file://localhost/root/docsync/tmp/mapr.com/docs/home/ClusterAdministration/data/volumes/ViewVolInfo.html
   3. file://localhost/root/docsync/tmp/mapr.com/docs/home/ReferenceGuide/volume-remove.html#volumeremove
