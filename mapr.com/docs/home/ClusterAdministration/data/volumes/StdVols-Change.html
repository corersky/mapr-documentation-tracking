Changing a Standard Volume to a Mirror Volume

   Describes how to convert a standard volume to a mirror volume.

   You can convert a standard volume to a mirror volume and set it up to
   mirror one of its associated mirror volumes using the MapR Control
   System (MCS), CLI, and REST API.

Changing a Standard Volume to a Mirror Volume Using the MapR Control System

    1. Log in to MCS and go to the [1]Viewing Volume Detailspage for the
       standard volume.
    2. Select Make Mirror Volumes from the Select Action dropdown menu.
       The Mirror Volume confirmation dialog displays.
    3. Select the:
          + Name of the source cluster where the associated mirror volume,
            which the converted volume will mirror, exists.
          + Name of the source volume, which the converted volume will
            mirror, from the list of associated mirror volumes.
       The standard volume, when converted, can only be a mirror of one of
       its associated mirror volumes.
    4. Click Save Changes for the changes to take effect.
       Note: It might take some time (approximately 10 minutes or so) to
       convert a standard volume to a mirror volume. You need to wait
       until the operation is complete before performing other actions.

   After converting the standard volume to a mirror volume:
    1. Convert the source (mirror) volume to a standard (read/write)
       volume to prevent a deadlock and to allow writes to continue on the
       volume.
    2. Associate a mirroring schedule with this volume to ensure that data
       on this volume is in sync with the source volume.

Changing a Standard Volume to a Mirror Volume Using the CLI or REST API

   CLI
          To convert a standard volume to a mirror volume from the CLI,
          run the maprcli volume modify command with the -type option
          value set to mirror.

maprcli volume modify -name <volume name> -type mirror

   REST
          To convert a standard volume to a mirror volume, send a request
          of type POST. For example:

curl -k -X POST 'https://<hostname>:8443/rest/volume/modify?name=<volName>&type=
mirror' --user mapr:mapr

   For more information, see [2]volume modify.
   Note: It might take some time (approximately 10 minutes or so) to
   convert a standard volume to a mirror volume. You need to wait until
   the operation is complete before performing other actions.
   After converting the standard volume to a mirror volume:
    1. Convert the source (mirror) volume to a standard (read/write)
       volume to prevent a deadlock and to allow writes to continue on the
       volume.
    2. Associate a mirroring schedule with this volume to ensure that data
       on this volume is in sync with the source volume.

References

   1. file://localhost/root/docsync/tmp/mapr.com/docs/home/ClusterAdministration/data/volumes/ViewVolDetails.html
   2. file://localhost/root/docsync/tmp/mapr.com/docs/home/ReferenceGuide/volume-modify.html
