Prerequisites for Installing the MapR Container Storage Interface (CSI)
Storage Plugin

Hardware and Software Requirements

   To install and use the MapR Container Storage Interface (CSI) Storage
   Plugin, you must have the following:
   Component Supported Versions
   MapR-XD 6.1.0 or later
   MapR Ecosystem Pack (MEP) Any MEP supported by MapR 6.1.0 or later. See
   [1]MEP Support by MapR Core Version.
   Kubernetes Software 1.13.x or later*
   OS (Kubernetes nodes) All nodes in the Kubernetes cluster must use the
   same Linux OS. Configuration files are available to support:
     * CentOS
     * Red Hat (use CentOS configuration file)
     * Ubuntu

   Note: [2]Docker for Mac with Kubernetes is not supported as a
   development platform for containers that use the MapR Data Fabric for
   Kubernetes.
   CSI Driver 1.0 or later (implementing [3]CSI spec v1.0.0). The
   [4]download location shows the available versions of the driver. Driver
   is supported for:
     * CentOS
     * Ubuntu

   Sidecar Container
     * csi-provisioner — v1.0.1
     * csi-attacher — v1.0.1
     * driver-registrar — v1.0.1
     * livenessprobe — v1.0.1

   POSIX License The Basic POSIX client package is included by default
   when you install the MapR Data Fabric for Kubernetes. The Platinum
   POSIX client can be enabled by specifying a parameter in the Pod spec.

   To enable the Platinum POSIX client package, see [5]Enabling the
   Platinum Posix Client for MapR Data Fabric for Kubernetes FlexVolume
   Driver. For a comparison of the Basic and Platinum POSIX client
   packages, see [6]Preparing for Installation.

   *Kubernetes alpha features are not supported.

   **Only the POSIX client is supported. NFSv3 and NFSv4 are not
   supported.

Before You Install

   Before installing the MapR Container Storage Interface (CSI) Storage
   Plugin, note that the installation procedure assumes that the
   Kubernetes cluster is already installed and functioning normally. In
   addition:
    1. Ensure that all Kubernetes nodes use the same Linux distribution.
       For example, all nodes can be CentOS nodes, or all nodes can be
       Ubuntu nodes. But a cluster with a mixture of CentOS and Ubuntu
       nodes is not supported.
    2. Configure your Kubernetes cluster to allow privileged pods by
       running the following commands:
$ ./kube-apiserver ...  --allow-privileged=true …
$ ./kubelet ...  --allow-privileged=true ...
    3. Enable mount propagation to share volumes mounted by one container
       with other containers in the same pod and other pods on the same
       node.
       See [7]Mount Propagation for more information.

References

   1. https://maprdocs.mapr.com/home/InteropMatrix/r_mep_support_core_version.html
   2. https://docs.docker.com/docker-for-mac/kubernetes/
   3. https://github.com/container-storage-interface/spec/blob/master/spec.md
   4. file://localhost/root/docsync/tmp/mapr.com/docs/home/CSIdriver/csi_downloads.html
   5. file://localhost/root/docsync/tmp/mapr.com/docs/home/PersistentStorage/kdf_enabling_platinum_posix_client.html
   6. file://localhost/root/docsync/tmp/mapr.com/docs/home/AdvancedInstallation/MapRPOSIXfuseClient-prerequirements.html
   7. https://kubernetes.io/docs/concepts/storage/volumes/#mount-propagation
